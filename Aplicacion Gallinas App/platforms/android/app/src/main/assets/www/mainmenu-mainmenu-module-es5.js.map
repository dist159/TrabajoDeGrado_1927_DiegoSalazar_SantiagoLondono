{"version":3,"sources":["webpack:///src/app/mainmenu/mainmenu.page.html","webpack:///src/app/mainmenu/mainmenu-routing.module.ts","webpack:///src/app/mainmenu/mainmenu.module.ts","webpack:///src/app/mainmenu/mainmenu.page.scss","webpack:///src/app/mainmenu/mainmenu.page.ts"],"names":["routes","path","component","MainmenuPageRoutingModule","imports","forChild","exports","MainmenuPageModule","declarations","MainmenuPage","menu","navCtrl","_Servicios","storage","db","alertCtrl","humedad","temperatura","humedad2","temperatura2","humedad3","temperatura3","contador","deadChicken","userState","subscribe","user","_getUsuario","getUsuario","uid","res","UsuarioLocal","payload","val","idGalpon","galponid","set","console","log","getChickenLost","object","snapshotChanges","action","type","key","unsubscribe","navigateRoot","toggle","cerrarSesion","presentAlert","create","header","message","inputs","name","buttons","text","handler","data","convertToNumber","muertos","setChickenLost","translucent","backdropDismiss","alert","present","event","selector","template"],"mappings":"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","file":"mainmenu-mainmenu-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title style=\\\"font-family: 'letra3';\\\">\\n      Gallinas App\\n    </ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button (click)=\\\"openEnd()\\\">\\n        <ion-icon style=\\\"color: rgb(126, 81, 81);\\\" slot=\\\"icon-only\\\" name=\\\"menu\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n<!-- -----------------------------------MENU ---------------------------------->\\n<ion-menu side=\\\"start\\\" menuId=\\\"custom\\\" class=\\\"my-custom-menu\\\" type=\\\"overlay\\\">\\n  <ion-header>\\n    <ion-toolbar>\\n      <ion-item style=\\\"border: 3px solid rgb(134, 83, 83)(139, 92, 92) !important;--background:black\\\">\\n\\n        <ion-grid class=\\\"grida\\\" style=\\\"width: 100%; flex-direction: column\\\">\\n          <ion-row>\\n            <div class=\\\"ion-text-center\\\" style=\\\"width: 100%; flex-direction: column\\\">\\n              <ion-title *ngIf=\\\"UsuarioLocal\\\" style=\\\"color: white;\\\">{{UsuarioLocal.nombre}} {{UsuarioLocal.apellido}}\\n              </ion-title>\\n            </div>\\n          </ion-row>\\n        </ion-grid>\\n      </ion-item>\\n    </ion-toolbar>\\n  </ion-header>\\n  <ion-content>\\n    <ion-list>\\n\\n\\n      <ion-item (click)=\\\"ayuda()\\\">\\n        <ion-icon name=\\\"help\\\" slot=\\\"start\\\"></ion-icon>\\n        <ion-label>Ayuda</ion-label>\\n      </ion-item>\\n\\n      <ion-item (click)=\\\"cerrar()\\\">\\n        <ion-icon name=\\\"log-out\\\" slot=\\\"start\\\"></ion-icon>\\n        <ion-label style=\\\"font-family: 'labase3'\\\">Cerrar Sesión</ion-label>\\n      </ion-item>\\n      <div padding style=\\\"background: #ffffff; margin-top: 1%;\\\">\\n\\n\\n\\n      </div>\\n    </ion-list>\\n  </ion-content>\\n</ion-menu>\\n<ion-router-outlet main></ion-router-outlet>\\n\\n\\n<ion-content style=\\\"--background: #212852; height: 100%;\\\">\\n  <!--\\n<div class=\\\"ion-text-center\\\">\\n  <ion-button  class=\\\"ion-text-center\\\" style=\\\"width: 100px; height: 100px; margin: auto;\\\" (click)=\\\"agregarPollosMuertos()\\\">\\n    <img style=\\\"width: 100px;height: 100px;\\\"src=\\\"../../assets/imagenes/chicken_line-28-512.png\\\">\\n     <ion-text>{{deadChicken}} </ion-text>\\n  </ion-button>\\n</div>\\n-->\\n  <div class=\\\"ion-text-center\\\">\\n    <h2 padding style=\\\"color: white;\\\">Sensor 1</h2>\\n    <div text-center>\\n      <circle-progress [percent]=\\\"temperatura\\\" [radius]=\\\"60\\\" [outerStrokeWidth]=\\\"10\\\" [innerStrokeWidth]=\\\"7\\\"\\n        [outerStrokeColor]=\\\"'#ff7514'\\\" [innerStrokeColor]=\\\"'#C7E596'\\\" [animation]=\\\"true\\\" [animationDuration]=\\\"300\\\"\\n        [subtitle]=\\\"'Temperatura'\\\" [units]=\\\"'°C'\\\" [unitsColor]=\\\"'#ffffff'\\\" [titleColor]=\\\"'#ffffff'\\\"></circle-progress>\\n\\n      <circle-progress [percent]=\\\"humedad\\\" [radius]=\\\"60\\\" [outerStrokeWidth]=\\\"10\\\" [innerStrokeWidth]=\\\"7\\\"\\n        [outerStrokeColor]=\\\"'#256d7b'\\\" [innerStrokeColor]=\\\"'#C7E596'\\\" [animation]=\\\"true\\\" [animationDuration]=\\\"300\\\"\\n        [subtitle]=\\\"'Humedad'\\\" [units]=\\\"'°C'\\\" [unitsColor]=\\\"'#ffffff'\\\" [titleColor]=\\\"'#ffffff'\\\"></circle-progress>\\n    </div>\\n\\n  </div>\\n\\n  <div class=\\\"ion-text-center\\\">\\n    <h2 padding style=\\\"color: white;\\\">Sensor 2</h2>\\n    <div text-center>\\n      <circle-progress [percent]=\\\"temperatura2\\\" [radius]=\\\"60\\\" [outerStrokeWidth]=\\\"10\\\" [innerStrokeWidth]=\\\"7\\\"\\n        [outerStrokeColor]=\\\"'#ff7514'\\\" [innerStrokeColor]=\\\"'#C7E596'\\\" [animation]=\\\"true\\\" [animationDuration]=\\\"300\\\"\\n        [subtitle]=\\\"'Temperatura'\\\" [units]=\\\"'°C'\\\"[unitsColor]=\\\"'#ffffff'\\\" [titleColor]=\\\"'#ffffff'\\\"></circle-progress>\\n\\n      <circle-progress [percent]=\\\"humedad2\\\" [radius]=\\\"60\\\" [outerStrokeWidth]=\\\"10\\\" [innerStrokeWidth]=\\\"7\\\"\\n        [outerStrokeColor]=\\\"'#256d7b'\\\" [innerStrokeColor]=\\\"'#C7E596'\\\" [animation]=\\\"true\\\" [animationDuration]=\\\"300\\\"\\n        [subtitle]=\\\"'Humedad'\\\" [units]=\\\"'°C'\\\" [unitsColor]=\\\"'#ffffff'\\\" [titleColor]=\\\"'#ffffff'\\\"></circle-progress>\\n    </div>\\n\\n  </div>\\n\\n\\n  <div class=\\\"ion-text-center\\\">\\n    <h2 padding style=\\\"color: white;\\\">Sensor 3</h2>\\n\\n\\n\\n\\n    <div text-center>\\n      <circle-progress [percent]=\\\"temperatura3\\\" [radius]=\\\"60\\\" [outerStrokeWidth]=\\\"10\\\" [innerStrokeWidth]=\\\"7\\\"\\n        [outerStrokeColor]=\\\"'#ff7514'\\\" [innerStrokeColor]=\\\"'#C7E596'\\\" [animation]=\\\"true\\\" [animationDuration]=\\\"300\\\"\\n        [subtitle]=\\\"'Temperatura'\\\" [units]=\\\"'°C'\\\" [unitsColor]=\\\"'#ffffff'\\\" [titleColor]=\\\"'#ffffff'\\\"></circle-progress>\\n\\n      <circle-progress [percent]=\\\"humedad3\\\" [radius]=\\\"60\\\" [outerStrokeWidth]=\\\"10\\\" [innerStrokeWidth]=\\\"7\\\"\\n        [outerStrokeColor]=\\\"'#256d7b'\\\" [innerStrokeColor]=\\\"'#C7E596'\\\" [animation]=\\\"true\\\" [animationDuration]=\\\"300\\\"\\n        [subtitle]=\\\"'Humedad'\\\" [units]=\\\"'°C'\\\" [unitsColor]=\\\"'#ffffff'\\\" [titleColor]=\\\"'#ffffff'\\\"></circle-progress>\\n    </div>\\n\\n  </div>\\n\\n\\n\\n\\n\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { MainmenuPage } from './mainmenu.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MainmenuPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class MainmenuPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { MainmenuPageRoutingModule } from './mainmenu-routing.module';\n\nimport { MainmenuPage } from './mainmenu.page';\nimport { NgCircleProgressModule } from 'ng-circle-progress';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    MainmenuPageRoutingModule,\n    NgCircleProgressModule\n  ],\n  declarations: [MainmenuPage]\n})\nexport class MainmenuPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21haW5tZW51L21haW5tZW51LnBhZ2Uuc2NzcyJ9 */\";","/* mainmenu.page **************************************************************/\n/*                                                                            */\n/*                       Pagina mainmenu (funciones)                          */\n/*                                                                            */\n/******************************************************************************/\n\n/*******************************************************************************\n\n    Notas:           Codigo de las funciones de la pagina mainmenu. Esta pagina \n                     es la pagina principal al iniciar sesion. Tiene un menu \n                     lateral para acceder a otra paginas y la lectura basica \n                     de los sensores de x galpon.\n\n    Registro de Revisiones:\n\n    FECHA      RESPONSABLE  REVISION\n    -----------------------------------------------------------------------\n    Mar 05/20  S.Londoño    Implementacion original\n\n    Mar 05/20  D.Salazar    Implementacion original\n\n\n*******************************************************************************/\n\nimport { Component, OnInit } from '@angular/core';\nimport { AngularFireDatabase } from '@angular/fire/database';\nimport { MenuController, NavController, AlertController } from '@ionic/angular';\nimport { Storage } from '@ionic/storage';\nimport { ServiciosGService, usuario } from '../servicios-g.service';\n\n@Component({\n  selector: 'app-mainmenu',\n  templateUrl: './mainmenu.page.html',\n  styleUrls: ['./mainmenu.page.scss'],\n})\nexport class MainmenuPage implements OnInit {\n\n  /* Variables para los sensores */\n  humedad: number = 0;\n  temperatura: number = 0;\n  humedad2: number = 0;\n  temperatura2: number = 0;\n  humedad3: number = 0;\n  temperatura3: number = 0;\n  contador: any = 200;\n  /*Variables del usuario*/\n  UsuarioLocal: usuario;\n  idGalpon: string;\n\n  deadChicken:number=0;\n  constructor(\n    private menu: MenuController,\n    public navCtrl: NavController,\n    public _Servicios: ServiciosGService,\n    private storage: Storage,\n    private db: AngularFireDatabase,\n    public alertCtrl: AlertController) { }\n\n  ngOnInit() {\n\n    /** Carga directamente los datos del servidor almacenados para cada uno de los sensosres */\n    /** Se obtiene el objeto de usuario y se determina el galpon */\n    this._Servicios.userState().subscribe((user: firebase.User) => {\n      const _getUsuario = this._Servicios.getUsuario(user.uid).subscribe(res => {\n        this.UsuarioLocal = res.payload.val() as usuario;\n        this.idGalpon = this.UsuarioLocal.galponid;\n        this.storage.set('_idGalpon', this.idGalpon);\n        console.log(this.idGalpon)\n\n        this._Servicios.getChickenLost(this.idGalpon).subscribe(res =>{\n          //this.deadChicken=null;\n          this.deadChicken=res as number;\n        })\n\n        /** Determina el contador para asiganarlo como un indice y obtener el ultimo dato almacenado en el servidor */\n        this.db.object(\"Galpones/\" + this.idGalpon + \"/\" + 'contador').snapshotChanges().subscribe(action => {\n          console.log(action.type);\n          console.log(action.key)\n          console.log(action.payload.val())\n         // this.contador = action.payload.val() as number;\n\n          /** Se obtiene el ultimo dato almacenado en la base de datos para la temperatura de x galpon para el sensor 1 */\n          this.db.object(\"Galpones/\" + this.idGalpon + \"/\" + \"SensorTemp1/\" + (this.contador - 1) + \"/val\").snapshotChanges().subscribe(action => {\n            console.log(action.type);\n            console.log(action.key)\n            console.log(action.payload.val())\n            this.temperatura = action.payload.val() as number\n          });\n\n          /** Se obtiene el ultimo dato almacenado en la base de datos para la humedad de x galpon para el sensor 1 */\n          this.db.object(\"Galpones/\" + this.idGalpon + \"/\" + \"SensorHum1/\" + (this.contador - 1) + \"/val\").snapshotChanges().subscribe(action => {\n            console.log(action.type);\n            console.log(action.key)\n            console.log(action.payload.val())\n            this.humedad = action.payload.val() as number\n          });\n\n          /** Se obtiene el ultimo dato almacenado en la base de datos para la temperatura de x galpon para el sensor 2 */\n          this.db.object(\"Galpones/\" + this.idGalpon + \"/\" + \"SensorTemp2/\" + (this.contador - 1) + \"/val\").snapshotChanges().subscribe(action => {\n            console.log(action.type);\n            console.log(action.key)\n            console.log(action.payload.val())\n            this.temperatura2 = action.payload.val() as number\n          });\n\n          /** Se obtiene el ultimo dato almacenado en la base de datos para la humedad de x galpon para el sensor 2 */\n          this.db.object(\"Galpones/\" + this.idGalpon + \"/\" + \"SensorHum2/\" + (this.contador - 1) + \"/val\").snapshotChanges().subscribe(action => {\n            console.log(action.type);\n            console.log(action.key)\n            console.log(action.payload.val())\n            this.humedad2 = action.payload.val() as number\n          });\n\n          /** Se obtiene el ultimo dato almacenado en la base de datos para la temperatura de x galpon para el sensor 3 */\n          this.db.object(\"Galpones/\" + this.idGalpon + \"/\" + \"SensorTemp3/\" + (this.contador - 1) + \"/val\").snapshotChanges().subscribe(action => {\n            console.log(action.type);\n            console.log(action.key)\n            console.log(action.payload.val())\n            this.temperatura3 = action.payload.val() as number\n          });\n\n          /** Se obtiene el ultimo dato almacenado en la base de datos para la humedad de x galpon para el sensor 3 */\n          this.db.object(\"Galpones/\" + this.idGalpon + \"/\" + \"SensorHum3/\" + (this.contador - 1) + \"/val\").snapshotChanges().subscribe(action => {\n            console.log(action.type);\n            console.log(action.key)\n            console.log(action.payload.val())\n            this.humedad3 = action.payload.val() as number\n          });\n        });\n        _getUsuario.unsubscribe();\n      });\n    });\n  }\n\n  /*FN****************************************************************************\n  *\n  *   void userState()\n  *\n  *   Retorna:         El estado de la autenticidad del ususario\n  *\n  *   Proposito:       Permite obtener el estado de la autenticidad del usuario \n  *                    verificando si la sesion esta iniciada.  \n  *\n  *******************************************************************************/\n  control() {\n    this.navCtrl.navigateRoot('/home');\n  }\n\n  /*FN****************************************************************************\n  *\n  *   void openHeatMap()\n  *\n  *   Retorna:         Nada\n  *\n  *   Proposito:       Navega a la pagina heatmap. \n  *\n  *******************************************************************************/\n  openHeatMap() {\n    this.navCtrl.navigateRoot('/heatmap');\n  }\n\n  /*FN****************************************************************************\n  *\n  *   void openEnd()\n  *\n  *   Retorna:         Nada\n  *\n  *   Proposito:       Abre el menu lateral.\n  *\n  *******************************************************************************/\n  openEnd() {\n    this.menu.toggle('custom');\n  }\n\n  /*FN****************************************************************************\n  *\n  *   void cerrar()\n  *\n  *   Retorna:         Nada\n  *\n  *   Proposito:       Cierra la sesion al borrar las credenciales del usuario \n  *                    y modifica la bandera de la sesion iniciada.  \n  *\n  *******************************************************************************/\n  cerrar() {\n    this.storage.set('log', 'no');\n    this._Servicios.cerrarSesion();\n    this.navCtrl.navigateRoot('/iniciar-sesion');\n\n  }\n  config() {\n\n  }\n\n  ayuda() {\n\n  }\n\n  agregarPollosMuertos() {\n    this.presentAlert();\n  }\n\n\n  //Alerta inicial\n  async presentAlert() {\n    const alert = await this.alertCtrl.create({\n      header: 'Pollos perdido',\n      message: 'ingrese la cantidad de pollos perdidod',\n      inputs: [\n        {\n          name: 'muertos',\n          type: 'number',\n        },\n\n      ],\n      buttons: [{\n        text: 'Si',\n        handler: (data) => {\n          this.deadChicken+=this.convertToNumber(data.muertos);\n          console.log(this.deadChicken)\n          this._Servicios.setChickenLost(this.idGalpon,(this.deadChicken)); \n        }\n      }],\n      translucent: true,\n      backdropDismiss: false\n    });\n    await alert.present();\n  }\n\n  public convertToNumber(event):number {  return +event; }\n}\n"]}